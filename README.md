# 計算機言語構成論 問題4.2

講義ページ→ https://ie.u-ryukyu.ac.jp/~kono/lecture/compiler/c4/lecture.html

問題4.2

>s-calc.c の若干の改良を試みる。あとでコンパイラに書き換えることを前提にいくつかの機能をつけ加えて見よう。
termとして8進数や16進数 (楽勝)
-1 や -a (楽勝)
AND(&)やOR(|)の計算 (楽勝)
<<,>> などの算術シフト (楽勝)
Cの三項演算子a?b:c (コンパイルは難しい)
制御構造 while, for 文など (難しい)
配列 (宣言を別にするのが簡単だろう)
手続き呼び出し (入力テキストをすべて取っておく必要がある)
浮動小数点 (全体的な改良が必要になる。すべの数を小数点で計算するのが楽だろう)
楽勝と書いてある部分は必須とする。残りのどれか、または、自分で考えた機能を実装し、my-calc.cを作って見よ。
実行結果と、変更した主要な部分を明示せよ。

---

# 追加した機能
* 必須
    * termとして8進数や16進数 
    * -1 や -a 
    * AND(&)やOR(|)の計算 
    * <<,>> などの算術シフト 
* その他 
    * Cの三項演算子a?b:c
    * ==や!=の演算

# 実行結果

input.txtを入力すると、次の結果が得られた。
```
% ./a.out < input.txt
1
 = 0x00000001 = 1
1+2			//  expr
 = 0x00000003 = 3
2*3			//  mexpr
 = 0x00000006 = 6
1+(2*3)			// term
 = 0x00000007 = 7
1+2*3			// expr order
 = 0x00000007 = 7
-1+0x10*010		// token
 = 0x0000007f = 127
(0xff&07)|0x100		// logical expression
 = 0x00000107 = 263
100/10
 = 0x0000000a = 10
a=1*3
 = 0x00000003 = 3
b=2*3
 = 0x00000006 = 6
a+b
 = 0x00000009 = 9
a=(b=3<<2)
 = 0x0000000c = 12
a>>1
 = 0x00000006 = 6
b
 = 0x0000000c = 12
1==1
 = 0x00000001 = 1
1==0x10
 = 0x00000000 = 0
b==a
 = 0x00000001 = 1
b==a?-a:b+1
 = 0xfffffff4 = -12
b!=a?-a:b+1
 = 0x0000000d = 13
!(b+1>a)?-a:b+1
 = 0x0000000d = 13
!(b+1<a)?-a:b+1
 = 0xfffffff4 = -12
```